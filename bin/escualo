#!/usr/bin/env ruby

require 'rubygems'
require 'bundler/setup'
require 'commander/import'

require_relative '../lib/escualo'

program :name, 'escualo'
program :version, Escualo::VERSION
program :description, 'escualo provisioning tool implementation for ruby'

require_relative '../lib/command'

def step(name, &block)
  say name
  block.call
end

def do_unless(done, done_message, options)
  if !options.force && done
    say "Nothing to do. #{done_message}"
    say 'Use --force to proceed it anyway'
  else
    yield
  end
end

require_relative '../lib/commands/globals'

require_relative '../lib/commands/bootstrap'
require_relative '../lib/commands/deploy'
require_relative '../lib/commands/script'
require_relative '../lib/commands/upload'
require_relative '../lib/commands/rake'

require_relative '../lib/commands/plugin'
require_relative '../lib/commands/artifact'
require_relative '../lib/commands/remote'
require_relative '../lib/commands/env'

